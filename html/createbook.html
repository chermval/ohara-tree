<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">

    <title>OHARA'S TREE</title>

    <!-- attach our stylesheet -->
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <!-- header element -->
    <header class="cabezera">
        <!-- our main logo -->
        <a id="logo" class="cabezera-logo" href="../index.html">
            <span>Ohara's tree</span>
        </a>

        <!-- main navigation links -->
        <nav class="cabezera-menu">
            <ul>
                <li><a href="#">Agregar libro</a></li>
                <li><a href="#">Login</a></li>
            </ul>
       </nav>
      
    </header>


    <!-- main element -->
    <main>
        <article>
            <h2>Buscar libros</h2>
            
            <label for="searchBook">Buscar: </label>
            <input type="text" id="searchBook" value="armada">
            
		<div id="content"></div>

        </article>
        
        
        <article>
            <table id="resultadoLibros" class="tabla-resultado">
                <tr class="tabla-libros-cabezera">
                    <th>Titulo</th>
		    <th>Autor</th>
                    <th>ISBN</th>
   
		 </tr>       
            </table>
            
        </article>
    </main>


    <!-- main element -->
    <footer>
        <p>Create by: chermosi</p>
    </footer>
    
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script> 
        var searchBook= document.getElementById("searchBook").value; 
        var table = document.getElementById("resultadoLibros");
        
        
        axios.get('https://www.googleapis.com/books/v1/volumes?q='+searchBook)
        .then(function (respuesta) {
            var rowCount = table.rows.length;
    	    
            
           console.log(respuesta);

	   for (var i = 0; i < 10; i++){
		
		var row = table.insertRow(rowCount);
		var libro = respuesta.data.items[i];

		
		
		row.insertCell(0).innerHTML= libro.volumeInfo.title; 
		  
		var autor = libro.volumeInfo.authors[0];
		if (autor === undefined){
			autor = "Anonimo";
		}
		
    		row.insertCell(1).innerHTML= autor; 
    		var isbn13 = null;
		var isbnOtro = null;
		   
		for (var cont = 0; cont < libro.volumeInfo.industryIdentifiers.length; cont++){
			var isbnType = libro.volumeInfo.industryIdentifiers[cont].type;
			
			if(isbnType == "ISBN_13"){
				isbn13 = libro.volumeInfo.industryIdentifiers[cont].identifier;
			}else {
				isbnOtro = libro.volumeInfo.industryIdentifiers[cont].identifier;
			}
		}
		
		if (isbn13 != null){
			row.insertCell(2).innerHTML= isbn13;
		} else{
			row.insertCell(2).innerHTML= isbnOtro;
		}
		
		
		rowCount++;   
	    }
            
        
            
        })
        .catch(function (error) {
            console.log(error);
        });
        
    </script>

</body>
</html>
